{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///medium-editor-insert.min.js","webpack:///webpack/bootstrap 1d50ddc6133080e5a3e4","webpack:///./src/js/Plugin.js","webpack:///./src/js/utils.js","webpack:///./src/js/Core.js","webpack:///./src/js/addons/Embeds.js","webpack:///./src/js/addons/Images.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_Core","_Core2","MediumEditorInsert","MediumEditor","Extension","extend","name","addons","images","embeds","init","prototype","apply","arguments","core","destroy","removeButtons","ucfirst","str","charAt","toUpperCase","slice","generateRandomString","length","undefined","Math","random","toString","substr","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_utils","_utils2","_Images","_Images2","_Embeds","_Embeds2","Core","plugin","_plugin","_editor","base","initAddons","addButtons","events","_this","addonActions","on","document","toggleButtons","bind","buttons","getElementsByClassName","toggleAddons","Array","forEach","action","handleAddonClick","window","positionButtons","_this2","initializedAddons","keys","addonOptions","className","console","error","_this3","html","createElement","getEditorId","classList","add","setAttribute","addon","label","innerHTML","body","appendChild","remove","el","elPosition","addonButton","addonsStyle","addonButtonStyle","position","contains","getSelectedParentElement","getBoundingClientRect","getComputedStyle","top","scrollY","left","scrollX","parseInt","marginLeft","style","innerText","trim","activeParagraph","showButtons","hideButtons","toggle","e","currentTarget","getAttribute","preventDefault","handleClick","Embeds","options","assign","log","Images","preview","uploadUrl","_input","type","multiple","uploadFiles","click","paragraph","nodeName","toLowerCase","div","parentNode","insertBefore","files","file","uid","upload","reader","FileReader","onload","insertImage","result","readAsDataURL","xhr","XMLHttpRequest","data","FormData","open","onreadystatechange","readyState","status","image","querySelector","replaceImage","responseText","append","send","url","figure","img","src","alt","removeAttribute"],"mappings":"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","file":"medium-editor-insert.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MediumEditorInsert\"] = factory();\n\telse\n\t\troot[\"MediumEditorInsert\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MediumEditorInsert\"] = factory();\n\telse\n\t\troot[\"MediumEditorInsert\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _Core = __webpack_require__(2);\n\t\n\tvar _Core2 = _interopRequireDefault(_Core);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MediumEditorInsert = MediumEditor.Extension.extend({\n\t    name: 'insert',\n\t\n\t    addons: {\n\t        images: true,\n\t        embeds: true\n\t    },\n\t\n\t    init: function init() {\n\t        MediumEditor.Extension.prototype.init.apply(this, arguments);\n\t\n\t        this.core = new _Core2.default(this);\n\t    },\n\t\n\t    destroy: function destroy() {\n\t        this.core.removeButtons();\n\t    }\n\t});\n\t\n\texports.default = MediumEditorInsert;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = {\n\t\t/**\n\t  * Capitalize first character\n\t  *\n\t  * @param {string} str\n\t  * @return {string}\n\t  */\n\t\n\t\tucfirst: function ucfirst(str) {\n\t\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t\t},\n\t\n\t\tgenerateRandomString: function generateRandomString() {\n\t\t\tvar length = arguments.length <= 0 || arguments[0] === undefined ? 15 : arguments[0];\n\t\n\t\t\treturn Math.random().toString(36).substr(2, length + 2);\n\t\t}\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _utils = __webpack_require__(1);\n\t\n\tvar _utils2 = _interopRequireDefault(_utils);\n\t\n\tvar _Images = __webpack_require__(4);\n\t\n\tvar _Images2 = _interopRequireDefault(_Images);\n\t\n\tvar _Embeds = __webpack_require__(3);\n\t\n\tvar _Embeds2 = _interopRequireDefault(_Embeds);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Core = function () {\n\t    function Core(plugin) {\n\t        _classCallCheck(this, Core);\n\t\n\t        this._plugin = plugin;\n\t        this._editor = this._plugin.base;\n\t\n\t        this.initAddons();\n\t        this.addButtons();\n\t        this.events();\n\t    }\n\t\n\t    _createClass(Core, [{\n\t        key: 'events',\n\t        value: function events() {\n\t            var _this = this;\n\t\n\t            var addonActions = void 0;\n\t\n\t            // This could be chained when medium-editor 5.15.2 is released\n\t            // https://github.com/yabwe/medium-editor/pull/1046\n\t            this._plugin.on(document, 'click', this.toggleButtons.bind(this));\n\t            this._plugin.on(document, 'keyup', this.toggleButtons.bind(this));\n\t            this._plugin.on(this.buttons.getElementsByClassName('medium-editor-insert-buttons-show')[0], 'click', this.toggleAddons.bind(this));\n\t\n\t            // This could be written in one statement when medium-editor 5.15.2 is released\n\t            // https://github.com/yabwe/medium-editor/pull/1046\n\t            addonActions = this.buttons.getElementsByClassName('medium-editor-insert-action');\n\t            Array.prototype.forEach.call(addonActions, function (action) {\n\t                _this._plugin.on(action, 'click', _this.handleAddonClick.bind(_this));\n\t            });\n\t\n\t            this._plugin.on(window, 'resize', this.positionButtons.bind(this));\n\t        }\n\t    }, {\n\t        key: 'initAddons',\n\t        value: function initAddons() {\n\t            var _this2 = this;\n\t\n\t            this._plugin.initializedAddons = {\n\t                images: new _Images2.default(this._plugin, this._plugin.addons.images),\n\t                embeds: new _Embeds2.default(this._plugin, this._plugin.addons.embeds)\n\t            };\n\t\n\t            Object.keys(this._plugin.addons).forEach(function (name) {\n\t                var addonOptions = _this2._plugin.addons[name];\n\t\n\t                if (!_this2._plugin.initializedAddons[name] && addonOptions) {\n\t                    var className = 'MediumEditorInsert' + _utils2.default.ucfirst(name);\n\t\n\t                    if (window[className]) {\n\t                        _this2._plugin.initializedAddons[name] = new window[className](_this2._plugin, addonOptions);\n\t                    } else {\n\t                        window.console.error('Addon \"' + name + '\" couldn\\'t be found!');\n\t                    }\n\t                }\n\t\n\t                if (!addonOptions) {\n\t                    delete _this2._plugin.initializedAddons[name];\n\t                }\n\t            });\n\t        }\n\t    }, {\n\t        key: 'addButtons',\n\t        value: function addButtons() {\n\t            var _this3 = this;\n\t\n\t            var html = void 0;\n\t\n\t            this.buttons = document.createElement('div');\n\t            this.buttons.id = 'medium-editor-insert-' + this._plugin.getEditorId();\n\t            this.buttons.classList.add('medium-editor-insert-buttons');\n\t            this.buttons.setAttribute('contentediable', false);\n\t\n\t            html = '<a class=\"medium-editor-insert-buttons-show\">+</a>\\n            <ul class=\"medium-editor-insert-buttons-addons\">';\n\t\n\t            Object.keys(this._plugin.initializedAddons).forEach(function (name) {\n\t                var addon = _this3._plugin.initializedAddons[name];\n\t\n\t                html += '<li><a class=\"medium-editor-insert-action\" data-addon=\"' + name + '\">' + addon.label + '</a></li>';\n\t            });\n\t\n\t            html += '</ul>';\n\t\n\t            this.buttons.innerHTML = html;\n\t\n\t            document.body.appendChild(this.buttons);\n\t        }\n\t    }, {\n\t        key: 'removeButtons',\n\t        value: function removeButtons() {\n\t            this.buttons.remove();\n\t        }\n\t    }, {\n\t        key: 'positionButtons',\n\t        value: function positionButtons() {\n\t            var el = void 0,\n\t                elPosition = void 0,\n\t                addons = void 0,\n\t                addonButton = void 0,\n\t                addonsStyle = void 0,\n\t                addonButtonStyle = void 0,\n\t                position = void 0;\n\t\n\t            if (this.buttons.classList.contains('medium-editor-insert-buttons-active') === false) {\n\t                return;\n\t            }\n\t\n\t            el = this._editor.getSelectedParentElement();\n\t            elPosition = el.getBoundingClientRect();\n\t            addons = this.buttons.getElementsByClassName('medium-editor-insert-buttons-addons')[0];\n\t            addonButton = this.buttons.getElementsByClassName('medium-editor-insert-action')[0];\n\t            addonsStyle = window.getComputedStyle(addons);\n\t            addonButtonStyle = window.getComputedStyle(addonButton);\n\t            position = {\n\t                top: window.scrollY + elPosition.top,\n\t                left: window.scrollX + elPosition.left - parseInt(addonsStyle.left, 10) - parseInt(addonButtonStyle.marginLeft, 10)\n\t            };\n\t\n\t            position.left = position.left < 0 ? elPosition.left : position.left;\n\t\n\t            this.buttons.style.left = position.left + 'px';\n\t            this.buttons.style.top = position.top + 'px';\n\t        }\n\t    }, {\n\t        key: 'toggleButtons',\n\t        value: function toggleButtons() {\n\t            var el = this._editor.getSelectedParentElement();\n\t\n\t            if (el.innerText.trim() === '') {\n\t                this.activeParagraph = el;\n\t                this.showButtons();\n\t            } else {\n\t                this.activeParagraph = null;\n\t                this.hideButtons();\n\t            }\n\t        }\n\t    }, {\n\t        key: 'showButtons',\n\t        value: function showButtons() {\n\t            this.buttons.classList.add('medium-editor-insert-buttons-active');\n\t            this.positionButtons();\n\t        }\n\t    }, {\n\t        key: 'hideButtons',\n\t        value: function hideButtons() {\n\t            this.buttons.classList.remove('medium-editor-insert-buttons-active');\n\t            this.buttons.classList.remove('medium-editor-insert-addons-active');\n\t        }\n\t    }, {\n\t        key: 'toggleAddons',\n\t        value: function toggleAddons() {\n\t            this.buttons.classList.toggle('medium-editor-insert-addons-active');\n\t        }\n\t    }, {\n\t        key: 'handleAddonClick',\n\t        value: function handleAddonClick(e) {\n\t            var name = e.currentTarget.getAttribute('data-addon');\n\t\n\t            e.preventDefault();\n\t\n\t            this._plugin.initializedAddons[name].handleClick(e);\n\t        }\n\t    }]);\n\t\n\t    return Core;\n\t}();\n\n\texports.default = Core;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Embeds = function () {\n\t\tfunction Embeds(plugin, options) {\n\t\t\t_classCallCheck(this, Embeds);\n\t\n\t\t\tthis._plugin = plugin;\n\t\t\tthis._editor = this._plugin.base;\n\t\n\t\t\tthis.options = {\n\t\t\t\tlabel: '<span class=\"fa fa-youtube-play\"></span>'\n\t\t\t};\n\t\n\t\t\tObject.assign(this.options, options);\n\t\n\t\t\tthis.label = this.options.label;\n\t\t}\n\t\n\t\t_createClass(Embeds, [{\n\t\t\tkey: 'handleClick',\n\t\t\tvalue: function handleClick() {\n\t\t\t\twindow.console.log('embeds clicked');\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Embeds;\n\t}();\n\n\texports.default = Embeds;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _utils = __webpack_require__(1);\n\t\n\tvar _utils2 = _interopRequireDefault(_utils);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Images = function () {\n\t\tfunction Images(plugin, options) {\n\t\t\t_classCallCheck(this, Images);\n\t\n\t\t\tthis._plugin = plugin;\n\t\t\tthis._editor = this._plugin.base;\n\t\n\t\t\tthis.options = {\n\t\t\t\tlabel: '<span class=\"fa fa-camera\"></span>',\n\t\t\t\tpreview: true,\n\t\t\t\tuploadUrl: 'upload.php'\n\t\t\t};\n\t\n\t\t\tObject.assign(this.options, options);\n\t\n\t\t\tthis.label = this.options.label;\n\t\t}\n\t\n\t\t_createClass(Images, [{\n\t\t\tkey: 'handleClick',\n\t\t\tvalue: function handleClick() {\n\t\t\t\tthis._input = document.createElement('input');\n\t\t\t\tthis._input.type = 'file';\n\t\t\t\tthis._input.multiple = true;\n\t\n\t\t\t\tthis._plugin.on(this._input, 'change', this.uploadFiles.bind(this));\n\t\n\t\t\t\tthis._input.click();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'uploadFiles',\n\t\t\tvalue: function uploadFiles() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar paragraph = this._plugin.core.activeParagraph;\n\t\n\t\t\t\tif (paragraph.nodeName.toLowerCase() === 'p') {\n\t\t\t\t\tvar div = document.createElement('div');\n\t\n\t\t\t\t\tparagraph.parentNode.insertBefore(div, paragraph);\n\t\t\t\t\tthis._plugin.core.activeParagraph = div;\n\t\t\t\t\tparagraph.remove();\n\t\t\t\t}\n\t\n\t\t\t\tArray.prototype.forEach.call(this._input.files, function (file) {\n\t\t\t\t\tvar uid = _utils2.default.generateRandomString();\n\t\n\t\t\t\t\tif (_this.options.preview) {\n\t\t\t\t\t\t_this.preview(file, uid);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t_this.upload(file, uid);\n\t\t\t\t});\n\t\n\t\t\t\tthis._plugin.core.hideButtons();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'preview',\n\t\t\tvalue: function preview(file, uid) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar reader = new FileReader();\n\t\n\t\t\t\treader.onload = function (e) {\n\t\t\t\t\t_this2.insertImage(e.target.result, uid);\n\t\t\t\t};\n\t\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'upload',\n\t\t\tvalue: function upload(file, uid) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tvar xhr = new XMLHttpRequest(),\n\t\t\t\t    data = new FormData();\n\t\n\t\t\t\txhr.open(\"POST\", this.options.uploadUrl, true);\n\t\t\t\txhr.onreadystatechange = function () {\n\t\t\t\t\tif (xhr.readyState === 4 && xhr.status === 200) {\n\t\t\t\t\t\tvar image = _this3._plugin.core.activeParagraph.querySelector('[data-uid=\"' + uid + '\"]');\n\t\n\t\t\t\t\t\tif (image) {\n\t\t\t\t\t\t\t_this3.replaceImage(image, xhr.responseText);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this3.insertImage(xhr.responseText);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\tdata.append(\"file\", file);\n\t\t\t\txhr.send(data);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'insertImage',\n\t\t\tvalue: function insertImage(url, uid) {\n\t\t\t\tvar el = this._plugin.core.activeParagraph,\n\t\t\t\t    figure = document.createElement('figure'),\n\t\t\t\t    img = document.createElement('img');\n\t\n\t\t\t\timg.src = url;\n\t\t\t\timg.alt = '';\n\t\t\t\tif (uid) {\n\t\t\t\t\timg.setAttribute('data-uid', uid);\n\t\t\t\t}\n\t\t\t\tfigure.appendChild(img);\n\t\n\t\t\t\tel.classList.add('medium-editor-insert-images');\n\t\t\t\tel.appendChild(figure);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'replaceImage',\n\t\t\tvalue: function replaceImage(image, url) {\n\t\t\t\timage.src = url;\n\t\t\t\timage.removeAttribute('data-uid');\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Images;\n\t}();\n\n\texports.default = Images;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** medium-editor-insert.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1d50ddc6133080e5a3e4\n **/","import Core from './Core';\n\nconst MediumEditorInsert = MediumEditor.Extension.extend({\n    name: 'insert',\n\n    addons: {\n        images: true,\n        embeds: true\n    },\n\n    init: function() {\n        MediumEditor.Extension.prototype.init.apply(this, arguments);\n\n        this.core = new Core(this);\n    },\n\n    destroy: function() {\n        this.core.removeButtons();\n    }\n});\n\nexport default MediumEditorInsert;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Plugin.js\n **/","export default {\n\t/**\n\t * Capitalize first character\n\t *\n\t * @param {string} str\n\t * @return {string}\n\t */\n\n\tucfirst: (str) => {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t},\n\n\tgenerateRandomString: (length = 15) => {\n\t\treturn Math.random().toString(36).substr(2, length + 2);\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/utils.js\n **/","import utils from './utils';\nimport Images from './addons/Images';\nimport Embeds from './addons/Embeds';\n\nexport default class Core {\n\n    constructor(plugin) {\n        this._plugin = plugin;\n        this._editor = this._plugin.base;\n\n        this.initAddons();\n        this.addButtons();\n        this.events();\n    }\n\n    events() {\n        let addonActions;\n\n        // This could be chained when medium-editor 5.15.2 is released\n        // https://github.com/yabwe/medium-editor/pull/1046\n        this._plugin.on(document, 'click', this.toggleButtons.bind(this));\n        this._plugin.on(document, 'keyup', this.toggleButtons.bind(this));\n        this._plugin.on(this.buttons.getElementsByClassName('medium-editor-insert-buttons-show')[0], 'click', this.toggleAddons.bind(this));\n\n        // This could be written in one statement when medium-editor 5.15.2 is released\n        // https://github.com/yabwe/medium-editor/pull/1046\n        addonActions = this.buttons.getElementsByClassName('medium-editor-insert-action');\n        Array.prototype.forEach.call(addonActions, (action) => {\n            this._plugin.on(action, 'click', this.handleAddonClick.bind(this));\n        });\n\n        this._plugin.on(window, 'resize', this.positionButtons.bind(this));\n    }\n\n    initAddons() {\n        this._plugin.initializedAddons = {\n            images: new Images(this._plugin, this._plugin.addons.images),\n            embeds: new Embeds(this._plugin, this._plugin.addons.embeds)\n        };\n\n        Object.keys(this._plugin.addons).forEach((name) => {\n            const addonOptions = this._plugin.addons[name];\n\n            if (!this._plugin.initializedAddons[name] && addonOptions) {\n                const className = `MediumEditorInsert${utils.ucfirst(name)}`;\n\n                if (window[className]) {\n                    this._plugin.initializedAddons[name] = new window[className](this._plugin, addonOptions);\n                } else {\n                    window.console.error(`Addon \"${name}\" couldn't be found!`);\n                }\n            }\n\n            if (!addonOptions) {\n                delete this._plugin.initializedAddons[name];\n            }\n        });\n    }\n\n    addButtons() {\n        let html;\n\n        this.buttons = document.createElement('div');\n        this.buttons.id = `medium-editor-insert-${this._plugin.getEditorId()}`;\n        this.buttons.classList.add('medium-editor-insert-buttons');\n        this.buttons.setAttribute('contentediable', false);\n\n        html = `<a class=\"medium-editor-insert-buttons-show\">+</a>\n            <ul class=\"medium-editor-insert-buttons-addons\">`;\n\n        Object.keys(this._plugin.initializedAddons).forEach((name) => {\n            const addon = this._plugin.initializedAddons[name];\n\n            html += `<li><a class=\"medium-editor-insert-action\" data-addon=\"${name}\">${addon.label}</a></li>`;\n        });\n\n        html += `</ul>`;\n\n        this.buttons.innerHTML = html;\n\n        document.body.appendChild(this.buttons);\n    }\n\n    removeButtons() {\n        this.buttons.remove();\n    }\n\n    positionButtons() {\n        let el, elPosition, addons, addonButton, addonsStyle, addonButtonStyle, position;\n\n        if (this.buttons.classList.contains('medium-editor-insert-buttons-active') === false) {\n            return;\n        }\n\n        el = this._editor.getSelectedParentElement();\n        elPosition = el.getBoundingClientRect();\n        addons = this.buttons.getElementsByClassName('medium-editor-insert-buttons-addons')[0];\n        addonButton = this.buttons.getElementsByClassName('medium-editor-insert-action')[0];\n        addonsStyle = window.getComputedStyle(addons);\n        addonButtonStyle = window.getComputedStyle(addonButton);\n        position = {\n            top: window.scrollY + elPosition.top,\n            left: window.scrollX + elPosition.left - parseInt(addonsStyle.left, 10) - parseInt(addonButtonStyle.marginLeft, 10)\n        };\n\n        position.left = position.left < 0 ? elPosition.left : position.left;\n\n        this.buttons.style.left = `${position.left}px`;\n        this.buttons.style.top = `${position.top}px`;\n    }\n\n    toggleButtons() {\n        const el = this._editor.getSelectedParentElement();\n\n        if (el.innerText.trim() === '') {\n            this.activeParagraph = el;\n            this.showButtons();\n        } else {\n            this.activeParagraph = null;\n            this.hideButtons();\n        }\n    }\n\n    showButtons() {\n        this.buttons.classList.add('medium-editor-insert-buttons-active');\n        this.positionButtons();\n    }\n\n    hideButtons() {\n        this.buttons.classList.remove('medium-editor-insert-buttons-active');\n        this.buttons.classList.remove('medium-editor-insert-addons-active');\n    }\n\n    toggleAddons() {\n        this.buttons.classList.toggle('medium-editor-insert-addons-active');\n    }\n\n    handleAddonClick(e) {\n        const name = e.currentTarget.getAttribute('data-addon');\n\n        e.preventDefault();\n\n        this._plugin.initializedAddons[name].handleClick(e);\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Core.js\n **/","export default class Embeds {\n\n\tconstructor(plugin, options) {\n\t\tthis._plugin = plugin;\n        this._editor = this._plugin.base;\n\n\t\tthis.options = {\n\t\t\tlabel: '<span class=\"fa fa-youtube-play\"></span>'\n\t\t};\n\n\t\tObject.assign(this.options, options);\n\n\t\tthis.label = this.options.label;\n\t}\n\n\thandleClick() {\n\t\twindow.console.log('embeds clicked');\n\t}\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/addons/Embeds.js\n **/","import utils from '../utils';\n\nexport default class Images {\n\n\tconstructor(plugin, options) {\n\t\tthis._plugin = plugin;\n        this._editor = this._plugin.base;\n\n\t\tthis.options = {\n\t\t\tlabel: '<span class=\"fa fa-camera\"></span>',\n\t\t\tpreview: true,\n\t\t\tuploadUrl: 'upload.php'\n\t\t};\n\n\t\tObject.assign(this.options, options);\n\n\t\tthis.label = this.options.label;\n\t}\n\n\thandleClick() {\n\t\tthis._input = document.createElement('input');\n\t\tthis._input.type = 'file';\n\t\tthis._input.multiple = true;\n\n\t\tthis._plugin.on(this._input, 'change', this.uploadFiles.bind(this));\n\n\t\tthis._input.click();\n\t}\n\n\tuploadFiles() {\n\t\tconst paragraph = this._plugin.core.activeParagraph;\n\n\t\tif (paragraph.nodeName.toLowerCase() === 'p') {\n\t\t\tconst div = document.createElement('div');\n\n\t\t\tparagraph.parentNode.insertBefore(div, paragraph);\n\t\t\tthis._plugin.core.activeParagraph = div;\n\t\t\tparagraph.remove();\n\t\t}\n\n\t\tArray.prototype.forEach.call(this._input.files, (file) => {\n\t\t\tconst uid = utils.generateRandomString();\n\n\t\t\tif (this.options.preview) {\n\t\t\t\tthis.preview(file, uid);\n\t\t\t}\n\n\t\t\tthis.upload(file, uid);\n\t\t});\n\n\t\tthis._plugin.core.hideButtons();\n\t}\n\n\tpreview(file, uid) {\n\t\tconst reader = new FileReader();\n\n\t\treader.onload = (e) => {\n\t\t\tthis.insertImage(e.target.result, uid);\n\t\t};\n\n\t\treader.readAsDataURL(file);\n\t}\n\n\tupload(file, uid) {\n\t\tconst xhr = new XMLHttpRequest(),\n\t\t\tdata = new FormData();\n\n\t\txhr.open(\"POST\", this.options.uploadUrl, true);\n\t\txhr.onreadystatechange = () => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                const image = this._plugin.core.activeParagraph.querySelector(`[data-uid=\"${uid}\"]`);\n\n                if (image) {\n                    this.replaceImage(image, xhr.responseText);\n                } else {\n                    this.insertImage(xhr.responseText);\n                }\n            }\n\t\t};\n\n\t\tdata.append(\"file\", file);\n\t\txhr.send(data);\n\t}\n\n    insertImage(url, uid) {\n        const el = this._plugin.core.activeParagraph,\n            figure = document.createElement('figure'),\n            img = document.createElement('img');\n\n        img.src = url;\n        img.alt = '';\n        if (uid) {\n            img.setAttribute('data-uid', uid);\n        }\n        figure.appendChild(img);\n\n        el.classList.add('medium-editor-insert-images');\n        el.appendChild(figure);\n    }\n\n    replaceImage(image, url) {\n        image.src = url;\n        image.removeAttribute('data-uid');\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/addons/Images.js\n **/"],"sourceRoot":""}